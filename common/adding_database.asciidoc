== Adding a Database

Now it's time to get to the part of the workshop you have all been waiting for - getting PostGIS up and running! Before we do this though I need to explain just a bit more about how OpenShift works. 

All of this work we have done so far has created entries in a database internal to OpenShift (stored in etcd to be exact). You can actually get OpenShift to give you back this information in YAML or JSON format. You can then take that information and give it to another OpenShift instance and get the exact same infrastructure. You can also edit or distribute that JSON or YAML to other people as configuration for their applications. We call these JSON or YAML files templates.

There is also no need to give all the JSON or YAML,  you can just distribute pieces of the "infrastructure". The other cool thing you can do is add parameters to the file that can be autogenerated at time of ingestion. These paramters can also be used throughout the same file, insuring that all pieces - like a DB and an app server - get the same values for a setting.

Let's go ahead and look at the JSON for the stuff we have created so far. In the terminal go ahead and do:

[source, bash]
----

> oc get svc,dc,bc -o json

----

This will give you the JSON for the services, deploymentConfigs, and buildConfigs you have already created. I will quickly talk through some of the what we are seeing but I, in no way, intend to do a deep dive in this class.


=== Generating the Database Pieces

In the terminal, please go to the location on your machine where you cloned the Crunchy Solutions repository. Go to the _examples/openshift_ directory. We are going to use the file _master-slave-rc-pg-env-vars.json_ and you can open it in your favorite text editor now. I am not expecting you to understand it but I want to show you the parameters. Now that we are done talking about it let's do it:

[source, bash]
----

 > oc new-app .\master-slave-rc-pg-env-vars.json

----

That's it - thanks to the work by Jeff you now have a master-replica PostGIS database setup. You can see it in the web overview for the project now.

=== Loadind the Database

Let's go ahead and load up the database in the master with some DDL.

<<<